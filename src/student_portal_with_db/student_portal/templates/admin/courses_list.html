{% extends 'base.html' %}
{% block title %}Courses{% endblock %}

{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="m-0">Courses</h2>

    <a href="{{ url_for('admin.course_new') }}"
       class="btn px-3"
       style="background:#800080; color:white; font-weight:500; border-radius:6px;">
        + Add Course
    </a>
</div>

<!-- Search -->
<form method="GET" class="mb-3 d-flex" style="max-width:400px;">
    <input type="text"
           class="form-control me-2"
           name="q"
           placeholder="Search by course name..."
           value="{{ q }}">
    <button class="btn btn-primary">Search</button>
</form>

<!-- Courses Table -->
<div class="card shadow-sm">
    <div class="card-body p-0">
        <table class="table table-striped mb-0">
            <thead class="table-dark">
                <tr>
                    <th width="80">ID</th>
                    <th>Course</th>
                    <th>Instructor</th>
                </tr>
            </thead>
            <tbody>
                {% for c in courses.items %}
                <tr>
                    <td>{{ c.id }}</td>
                    <td>{{ c.name }}</td>
                    <td>{{ c.instructor.name if c.instructor else '-' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Pagination -->
<nav aria-label="Page navigation" class="mt-3">
    <ul class="pagination">

        {% if courses.has_prev %}
        <li class="page-item">
            <a class="page-link"
               href="?page={{ courses.prev_num }}&q={{ q }}">Previous</a>
        </li>
        {% endif %}

        {% for p in courses.iter_pages() %}
            {% if p %}
                <li class="page-item {% if p == courses.page %}active{% endif %}">
                    <a class="page-link" href="?page={{ p }}&q={{ q }}">{{ p }}</a>
                </li>
            {% else %}
                <li class="page-item disabled"><span class="page-link">â€¦</span></li>
            {% endif %}
        {% endfor %}

        {% if courses.has_next %}
        <li class="page-item">
            <a class="page-link"
               href="?page={{ courses.next_num }}&q={{ q }}">Next</a>
        </li>
        {% endif %}

    </ul>
</nav>

{% endblock %}

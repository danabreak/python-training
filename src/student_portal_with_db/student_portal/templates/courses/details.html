{% extends 'base.html' %}
{% block title %}{{ course.name }}{% endblock %}

{% block content %}
<style>
.course-header {
    padding: 30px;
    background: #6a0dad;
    color: white;
    border-radius: 12px;
    margin-bottom: 30px;
}
.course-info {
    display: flex;
    flex-wrap: wrap;
    gap: 40px;
}
.course-box {
    flex: 1;
    background: #fff;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}
</style>

<div class="course-header">
    <h1>{{ course.name }}</h1>
    <p style="opacity: 0.9;">
        Instructor: <strong>{{ course.instructor.name if course.instructor else '-' }}</strong>
    </p>
</div>

<div class="course-info">

    <div class="course-box">
        <h4>ðŸ“˜ Course Description</h4>
        <p>{{ course.description or 'No description available.' }}</p>
    </div>

    <div class="course-box">
        <h4>ðŸ‘¥ Enrolled Students</h4>
        <h2>{{ students|length }}</h2>
    </div>

</div>
<hr>

{% if is_instructor or is_admin %}

<h3 class="mt-4">Students List</h3>

<div class="mb-3">
    <form method="GET">
        <input type="text" class="form-control" name="q" placeholder="Search students by name...">
    </form>
</div>

<table class="table table-striped">
    <thead class="table-dark">
        <tr>
            <th>Name</th>
            <th>Age</th>
            <th>User</th>
        </tr>
    </thead>
    <tbody>
        {% for s in students %}
        <tr>
            <td>
                <a href="{{ url_for('students.view_student', student_id=s.id) }}">
                    {{ s.name }}
                </a>
            </td>
            <td>{{ s.age }}</td>
            <td>{{ s.user.username }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% else %}

<div class="alert alert-info mt-4">
    You are enrolled in this course with <strong>{{ students|length }}</strong> other students.
</div>

{% endif %}
{% endblock %}